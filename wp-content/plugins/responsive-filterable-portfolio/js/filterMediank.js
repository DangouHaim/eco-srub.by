!function(t){t.fn.filterMediank=function(a){var i=this,h=t.extend({thumbsSpacing:15,backgroundColor:"white",galleryId:"gallery",thumbWidth:200,thumbHeight:200},a),s=h.thumbsSpacing,e=h.galleryId;function o(a){t("#"+a+" div.photos div.thumbnail_wrap_ a.thumbnail_.hideThumb").animate({opacity:0},500,function(){t(this).css({display:"none",top:"0px",left:"0px"})});var i=t("#"+a+" div.photos").width(),e=0,o=0;if(t("#"+a).width()<h.thumbWidth){var n=(h.thumbHeight+s)/(h.thumbWidth+s),l=t("#"+a).width()*n,m=t("#"+a).width()-10-s;t("#"+a+" .thumbnail_ img").css("maxWidth",m),t("#"+a+" .thumbnail_ img").css("maxHeight",l);var d=l}else{m=h.thumbWidth+s,d=h.thumbHeight+s;t("#"+a+" .thumbnail_ img").css("maxWidth",m),t("#"+a+" .thumbnail_ img").css("maxHeight",d)}maxColumns=Math.floor(i/m),0==maxColumns&&(maxColumns=1);var u=0,r=[];t("#"+a+" a.thumbnail_.showThumb").each(function(i){0===i%maxColumns/100?(0!==i&&(e+=d),r.push(u),o=0,u=0):o+=m,u+=m,t(this).css("display","block").animate({opacity:1,top:e+"px",left:o+"px"},500);var h=e+d;t("#"+a+" div.photos .thumbnail_wrap_").css({display:"table",height:h+"px"})}),1==r.length&&0==r[0]&&r.push(u);var b=Math.max.apply(Math,r);0==b?t("#"+a+" div.photos .thumbnail_wrap_").css({width:maxColumns*m-s+10+"px","":maxColumns*m+"px"}):t("#"+a+" div.photos .thumbnail_wrap_").css({width:b-s+10+"px"})}return t("#"+e).css("backgroundColor",h.backgroundColor),t(i).css("margin-bottom",s+"px"),t("#"+e).find("div.photos div.thumbnail_wrap_ a.thumbnail_").addClass("showThumb"),t(i).find("a.sortLink").on("click",function(a){t("#shield_"+e).height(t("#shield_"+e).parent().height()),a.preventDefault(),t(i).find("a.sortLink").removeClass("selected"),t(a.target).addClass("selected");var h,s,n=t(a.target).data("category");t.when((h=n,s=e,t("#"+s+" a.thumbnail_").each(function(){var a=t(this).data("categories");"all"===h?t(this).addClass("showThumb").removeClass("hideThumb").attr("rel","group"):-1!==a.toString().indexOf(",")?t.inArray(h.toString(),a.split(","))>-1?t(this).addClass("showThumb").removeClass("hideThumb").attr("rel","group"):t(this).addClass("hideThumb").removeClass("showThumb").attr("rel","none"):a==h?t(this).addClass("showThumb").removeClass("hideThumb").attr("rel","group"):t(this).addClass("hideThumb").removeClass("showThumb").attr("rel","none")}),void o(s))).done(function(){setTimeout(function(){t("#shield_"+e).height(0)},300)})}),o(e),{resizeWin:function(t){o(t)}}}}(jQuery);